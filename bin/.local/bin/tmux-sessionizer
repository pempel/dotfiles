#!/bin/sh

session=$(find ~/Projects -mindepth 1 -maxdepth 2 -type d | fzf)
session_name=$(basename $session | tr . _)

if ! tmux has-session -t $session_name 2>/dev/null; then
  tmux new-session -s $session_name -c $session -n 'nvim' -d nvim
  tmux new-window -t $session_name: -c $session -n 'zsh' -d
fi

if [ -z $TMUX ]; then
  tmux attach-session -t $session_name
else
  tmux switch-client -t $session_name
fi
